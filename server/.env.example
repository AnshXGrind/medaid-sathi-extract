# MED-AID SAARTHI Server Configuration
# Copy to .env and fill in real values

# Server
NODE_ENV=development
PORT=3001
API_BASE_URL=http://localhost:3001

# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# Security - HMAC for hashing sensitive IDs (generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
HMAC_SECRET=YOUR_128_CHAR_HMAC_SECRET_HERE_GENERATE_WITH_CRYPTO_RANDOM_BYTES
JWT_SECRET=YOUR_JWT_SECRET_HERE

# ABHA/NDHM Integration
# TODO: Replace with production credentials after government onboarding
ABHA_CLIENT_ID=your-abha-client-id
ABHA_CLIENT_SECRET=your-abha-client-secret-DO-NOT-COMMIT
ABHA_REDIRECT_URI=http://localhost:3001/api/auth/abha/callback
ABHA_BASE_URL=https://healthidsbx.abdm.gov.in/api/v2
ABHA_TOKEN_URL=https://dev.abdm.gov.in/gateway/v0.5/sessions
# Use sandbox for testing: healthidsbx.abdm.gov.in
# Use production after onboarding: healthid.abdm.gov.in

# Encryption for tokens (AES-256-GCM)
ENCRYPTION_KEY=YOUR_64_CHAR_ENCRYPTION_KEY_HERE
ENCRYPTION_IV_LENGTH=16

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Token Rotation
TOKEN_ROTATION_INTERVAL_HOURS=24
TOKEN_EXPIRY_DAYS=7

# Audit & Compliance
AUDIT_LOG_RETENTION_DAYS=2555
ENABLE_AUDIT_CHAINING=true

# Privacy Analytics
K_ANONYMITY_THRESHOLD=10
ENABLE_DIFFERENTIAL_PRIVACY=false
EPSILON=1.0

# Monitoring
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true

# CORS
ALLOWED_ORIGINS=http://localhost:8080,http://localhost:5173

# ===========================
# BLOCKCHAIN AUDIT TRAIL
# ===========================
# Enable blockchain logging for tamper-proof audit trail (Polygon Amoy Testnet)
USE_BLOCKCHAIN=false

# Polygon RPC URL (Amoy Testnet by default)
RPC_URL=https://rpc-amoy.polygon.technology

# Backend wallet private key for signing blockchain transactions
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: Fund this wallet with testnet MATIC from https://faucet.polygon.technology/
PRIVATE_KEY=YOUR_PRIVATE_KEY_HERE_DO_NOT_COMMIT

# Deployed ConsentAudit smart contract address
# Deploy: cd blockchain && npm run deploy
# This will be printed after successful deployment
CONTRACT_ADDRESS=

# Optional: Backend wallet address (for deployment script)
# If not set, deployer address will be used as authorized backend
BACKEND_WALLET_ADDRESS=

# Optional: PolygonScan API key for contract verification
# Get from: https://polygonscan.com/apis
POLYGONSCAN_API_KEY=

# Production Polygon Mainnet (after testing)
# POLYGON_RPC_URL=https://polygon-rpc.com
# Use mainnet only after thorough testing on Amoy testnet

